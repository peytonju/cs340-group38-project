{{!-- villagersgiftspreferences.handlebars (list / add) --}}
<h1>Villager Gift Preferences</h1>

<table>
  <thead>
    <tr><th>Villager</th><th>Gift</th><th>Preference</th></tr>
  </thead>
  <tbody>
    {{#each VillagersGiftsPreferences}}
      <tr>
          <td>
            {{#each ../Villagers}}
              {{#if (eq villagerID ../villagerID)}}
                ({{villagerID}}) {{villagerName}}
              {{/if}}
            {{/each}}
          </td>

          <td>
            {{#each ../Gifts}}
              {{#if (eq giftID ../giftID)}}
                ({{giftID}}) {{giftName}}
              {{/if}}
            {{/each}}
          </td>


        <form method="post" action="/tables/villagersgiftspreferences/update/{{villagerID}},{{giftID}}" style="display:inline;">

          <td>
            <select name="preference" required>
              {{#each ../GIFT_LIKES}}
                <option value="{{this}}" {{#if (eq this ../preference)}}selected{{/if}}>{{this}}</option>
              {{/each}}
            </select>
          </td>

          <td><button type="submit">Save</button></td>
        </form>



        <td>
          <form method="post" action="/tables/villagersgiftspreferences/delete/{{villagerID}},{{giftID}}" style="display:inline;">
            <button type="submit">Delete</button>
          </form>
        </td>
      </tr>
    {{else}}
      <tr><td colspan="3">No gift preferences recorded.</td></tr>
    {{/each}}
  </tbody>
</table>

<h2>Add Gift Preference</h2>
<form method="post" action="/tables/villagersgiftspreferences/insert">
  <select name="villagerID" required>
    <option value="" disabled selected>Villager…</option>
    {{#each Villagers}}
      <option value="{{villagerID}}">({{villagerID}}) {{villagerName}}</option>
    {{/each}}
  </select>
  
  <select name="giftID" required>
    <option value="" disabled selected>Gift…</option>
    {{#each Gifts}}
      <option value="{{giftID}}">({{giftID}}) {{giftName}}</option>
    {{/each}}
  </select>
  
  <select name="preference" required>
    <option value="" disabled selected>Preference Level…</option>
    {{#each GIFT_LIKES}}
      <option value="{{this}}">{{this}}</option>
    {{/each}}
  </select>
  
  <button type="submit">Add Preference</button>
</form>