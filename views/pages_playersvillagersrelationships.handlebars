{{!-- playersvillagersrelationships.handlebars (list / add) --}}
<h1>Player-Villager Relationships</h1>

<table>
  <thead>
    <tr><th>Player</th><th>Villager</th><th>Friendship Level</th><th>Relationship Status</th></tr>
  </thead>
  <tbody>
    {{#each PlayersVillagersRelationships}}
      <tr>
        <form method="post" action="/tables/playersvillagersrelationships/update/{{playerID}},{{villagerID}}" style="display:inline;">

          <td>
            <select name="playerID" required>
                {{#each ../Players}}
                  <option value="{{playerID}}" {{#if (eq playerID ../playerID)}}selected{{/if}}>
                    ({{playerID}}) {{playerName}}
                  </option>
                {{/each}}
              </select>
          </td>
        
          <td>
            <select name="villagerID" required>
                {{#each ../Villagers}}
                  <option value="{{villagerID}}" {{#if (eq villagerID ../villagerID)}}selected{{/if}}>
                    ({{villagerID}}) {{villagerName}}
                  </option>
                {{/each}}
              </select>
          </td>

          <td><input name="friendshipLevel" type="number" min="0" max="10" required value="{{friendshipLevel}}"/></td>

          <td><button type="submit">Save</button></td>
        </form>

        <td>
          <form method="post" action="/tables/playersvillagersrelationships/delete/{{playerID}},{{villagerID}}" style="display:inline;">
            <button type="submit">Delete</button>
          </form>
        </td>
      </tr>
    {{else}}
      <tr><td colspan="4">No relationships recorded.</td></tr>
    {{/each}}
  </tbody>
</table>

<h2>Add Player-Villager Relationship</h2>
<form method="post" action="/tables/playersvillagersrelationships/insert">
  <select name="playerID" required>
    <option value="" disabled selected>Player…</option>
    {{#each Players}}
      <option value="{{playerID}}"> ({{playerID}}) {{playerName}}</option>
    {{/each}}
  </select>
  
  <select name="villagerID" required>
    <option value="" disabled selected>Villager…</option>
    {{#each Villagers}}
      <option value="{{villagerID}}">({{villagerID}}) {{villagerName}}</option>
    {{/each}}
  </select>
  
  <input name="friendshipLevel" type="number" min="0" max="10" placeholder="Friendship Level (0-10)" required />
  
  <button type="submit">Add Relationship</button>
</form>